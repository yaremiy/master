<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–µ—Ç–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ - {{ url }}</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            line-height: 1.6;
            color: #333;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px 40px;
            text-align: center;
        }
        .header h1 { margin: 0 0 20px 0; font-size: 2.5em; font-weight: 300; }
        .header p { margin: 5px 0; opacity: 0.9; }
        .score-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.8em;
            font-weight: bold;
            margin-top: 20px;
        }
        .content { padding: 40px; }

        /* –ü–æ—è—Å–Ω–µ–Ω–Ω—è —Ñ–æ–∫—É—Å—É */
        .focus-note {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 25px;
            font-size: 14px;
        }

        /* –°—Ç–∏–ª—ñ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É */
        .metric-section {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .metric-section-title {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.4rem;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .metric-score-display {
            font-size: 1.2rem;
            font-weight: bold;
            padding: 8px 16px;
            border-radius: 20px;
            color: white;
        }
        .score-excellent { background: #27ae60; }
        .score-good { background: #3498db; }
        .score-fair { background: #f39c12; }
        .score-poor { background: #e74c3c; }
        .score-critical { background: #c0392b; }

        /* –°—É–±–º–µ—Ç—Ä–∏–∫–∏ */
        .submetric-section {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .submetric-section h4 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        .score-explanation {
            background: #e8f4fd;
            border-left: 4px solid #3498db;
            padding: 12px 15px;
            margin-bottom: 20px;
            font-size: 14px;
        }

        /* –ï–ª–µ–º–µ–Ω—Ç–∏ —Å–ø–∏—Å–∫—É */
        .element-list {
            margin-top: 15px;
        }
        .element-item {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            transition: box-shadow 0.2s;
        }
        .element-item:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .element-item.correct {
            border-left: 4px solid #27ae60;
            background: #f0f9f0;
        }
        .element-item.problematic {
            border-left: 4px solid #e74c3c;
            background: #fdf2f2;
        }
        .element-selector {
            font-family: 'Courier New', monospace;
            font-size: 13px;
            background: #2c3e50;
            color: #ecf0f1;
            padding: 8px 12px;
            border-radius: 4px;
            margin-bottom: 10px;
            word-break: break-all;
        }
        .element-html {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            background: #ecf0f1;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            overflow-x: auto;
            max-height: 200px;
            overflow-y: auto;
        }
        .element-issue {
            color: #e74c3c;
            font-weight: 500;
            margin-top: 10px;
        }
        .element-status {
            color: #27ae60;
            font-weight: 500;
            margin-top: 10px;
        }

        /* –ö–æ–Ω—Ç—Ä–∞—Å—Ç */
        .contrast-info {
            background: #fff;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 12px;
            margin-top: 10px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        .contrast-detail {
            font-size: 13px;
        }
        .color-swatch {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 1px solid #ccc;
            margin-left: 5px;
            vertical-align: middle;
            border-radius: 3px;
        }

        /* –§–æ—Ä–º–∏ */
        .form-section {
            background: #fff;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
        }
        .form-section h6 {
            margin: 0 0 10px 0;
            color: #495057;
        }

        /* –ü—ñ–¥—Å—É–º–æ–∫ */
        .success-summary {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 6px;
            padding: 12px;
            margin-top: 20px;
            color: #155724;
        }

        /* –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Å–µ–∫—Ü—ñ–π */
        h5 {
            font-size: 1.1rem;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        h5.problematic {
            color: #e74c3c;
        }
        h5.correct {
            color: #27ae60;
        }

        /* –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó */
        .recommendations-section {
            background: #fff3cd;
            border: 2px solid #ffeaa7;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
        }
        .recommendation-item {
            background: white;
            border-left: 4px solid #f39c12;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
        }
        .recommendation-item .priority {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }
        .priority.high { background: #e74c3c; color: white; }
        .priority.medium { background: #f39c12; color: white; }
        .priority.low { background: #3498db; color: white; }

        /* Footer */
        .footer {
            text-align: center;
            padding: 30px;
            color: #6c757d;
            font-size: 0.9em;
            border-top: 1px solid #dee2e6;
            margin-top: 40px;
            background: #f8f9fa;
        }

        /* –ê–∫–∫–æ—Ä–¥–µ–æ–Ω–∏ */
        .accordion {
            margin-top: 15px;
        }
        .accordion-header {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 12px 15px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #495057;
        }
        .accordion-header:hover {
            background: #e9ecef;
        }
        .accordion-header.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        .accordion-toggle {
            font-size: 12px;
            transition: transform 0.3s ease;
        }
        .accordion-header.active .accordion-toggle {
            transform: rotate(90deg);
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            padding: 0 15px;
        }
        .accordion-content.active {
            max-height: 5000px;
            padding: 15px;
            border: 1px solid #dee2e6;
            border-top: none;
            border-radius: 0 0 6px 6px;
            margin-top: -6px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç –î–µ—Ç–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ</h1>
            <p><strong>URL:</strong> {{ url }}</p>
            <p><strong>–î–∞—Ç–∞ –∞–Ω–∞–ª—ñ–∑—É:</strong> {{ date }}</p>
            <p><strong>–†—ñ–≤–µ–Ω—å —è–∫–æ—Å—Ç—ñ:</strong> {{ quality_level }}</p>
            <div class="score-badge">
                –ó–∞–≥–∞–ª—å–Ω–∏–π —Å–∫–æ—Ä: {{ final_score }}%
            </div>
        </div>

        <div class="content">
            <!-- –ü–æ—è—Å–Ω–µ–Ω–Ω—è —Ñ–æ–∫—É—Å—É -->
            <div class="focus-note">
                <strong>üí° –§–æ–∫—É—Å –∑–≤—ñ—Ç—É:</strong> –ù–∏–∂—á–µ –ø–æ–∫–∞–∑–∞–Ω—ñ —Ç—ñ–ª—å–∫–∏ –µ–ª–µ–º–µ–Ω—Ç–∏, —è–∫—ñ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è.
                –£—Å–ø—ñ—à–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –ø—ñ–¥—Ä–∞—Ö–æ–≤–∞–Ω—ñ –≤ –∑–∞–≥–∞–ª—å–Ω–æ–º—É —Å–∫–æ—Ä—ñ —Ç–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω—ñ –≤ –ø—ñ–¥—Å—É–º–∫—É.
            </div>

            <!-- –ü–ï–†–¶–ï–ü–¢–ò–í–ù–Ü–°–¢–¨ -->
            {% if detailed_analysis.get('alt_text') or detailed_analysis.get('contrast') or detailed_analysis.get('media_accessibility') %}
            <div class="metric-section">
                <div class="metric-section-title">
                    <span>üîç –ü–µ—Ä—Ü–µ–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å ({{ (subscores.perceptibility * 100)|round(1) }}%)</span>
                    <span class="metric-score-display {{ get_score_class(subscores.perceptibility) }}">
                        {{ (subscores.perceptibility * 100)|round(1) }}%
                    </span>
                </div>

                <!-- Alt Text -->
                {% if detailed_analysis.get('alt_text') %}
                {% set alt_text = detailed_analysis.alt_text %}
                <div class="submetric-section">
                    <h4>üñºÔ∏è –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π —Ç–µ–∫—Å—Ç –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω—å</h4>
                    {% if alt_text.score_explanation %}
                    <div class="score-explanation">{{ alt_text.score_explanation }}</div>
                    {% endif %}

                    {% if alt_text.problematic_images %}
                    <h5 class="problematic">‚ùå –ü—Ä–æ–±–ª–µ–º–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è ({{ alt_text.problematic_images|length }}):</h5>
                    <div class="element-list">
                        {% for img in alt_text.problematic_images %}
                        <div class="element-item problematic">
                            <div class="element-selector">{{ img.selector or '–ù–µ–≤—ñ–¥–æ–º–∏–π —Å–µ–ª–µ–∫—Ç–æ—Ä' }}</div>
                            <div class="element-html">{{ img.html or 'HTML –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π' }}</div>
                            <div class="element-issue"><strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> {{ img.issue or '–ù–µ–≤—ñ–¥–æ–º–∞ –ø—Ä–æ–±–ª–µ–º–∞' }}</div>
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}

                    {% if alt_text.correct_images_list %}
                    <div class="success-summary">
                        <strong>‚úÖ –£—Å–ø—ñ—à–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ:</strong> {{ alt_text.correct_images }} –∑–æ–±—Ä–∞–∂–µ–Ω—å –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º alt —Ç–µ–∫—Å—Ç–æ–º
                        {% if alt_text.correct_images > 10 %} (–ø–æ–∫–∞–∑–∞–Ω–æ –ø–µ—Ä—à–∏—Ö 10){% endif %}
                    </div>
                    {% endif %}
                </div>
                {% endif %}

                <!-- Contrast -->
                {% if detailed_analysis.get('contrast') %}
                {% set contrast = detailed_analysis.contrast %}
                <div class="submetric-section">
                    <h4>üé® –ö–æ–Ω—Ç—Ä–∞—Å—Ç –∫–æ–ª—å–æ—Ä—ñ–≤</h4>
                    {% if contrast.score_explanation %}
                    <div class="score-explanation">{{ contrast.score_explanation }}</div>
                    {% endif %}

                    {% if contrast.problematic_elements %}
                    <h5 class="problematic">‚ùå –ï–ª–µ–º–µ–Ω—Ç–∏ –∑ –Ω–∏–∑—å–∫–∏–º –∫–æ–Ω—Ç—Ä–∞—Å—Ç–æ–º ({{ contrast.problematic_elements|length }}):</h5>
                    <div class="element-list">
                        {% for elem in contrast.problematic_elements %}
                        <div class="element-item problematic">
                            <div class="element-selector">{{ elem.selector or '–ù–µ–≤—ñ–¥–æ–º–∏–π —Å–µ–ª–µ–∫—Ç–æ—Ä' }}</div>
                            <div class="element-html">{{ elem.html or 'HTML –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π' }}</div>
                            <div class="element-issue"><strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> {{ elem.issue or '–ù–∏–∑—å–∫–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç' }}</div>
                            {% if elem.contrast_ratio %}
                            <div class="contrast-info">
                                <div class="contrast-detail">
                                    <strong>–ü–æ—Ç–æ—á–Ω–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç:</strong> {{ elem.contrast_ratio }}
                                </div>
                                <div class="contrast-detail">
                                    <strong>–ù–µ–æ–±—Ö—ñ–¥–Ω–∏–π:</strong> {{ elem.required_ratio or '–ù–µ–≤—ñ–¥–æ–º–æ' }}
                                </div>
                                <div class="contrast-detail">
                                    <strong>–ö–æ–ª—ñ—Ä —Ç–µ–∫—Å—Ç—É:</strong> {{ elem.foreground or '–ù–µ–≤—ñ–¥–æ–º–æ' }}
                                    {% if elem.foreground %}
                                    <span class="color-swatch" style="background-color: {{ elem.foreground }}"></span>
                                    {% endif %}
                                </div>
                                <div class="contrast-detail">
                                    <strong>–ö–æ–ª—ñ—Ä —Ñ–æ–Ω—É:</strong> {{ elem.background or '–ù–µ–≤—ñ–¥–æ–º–æ' }}
                                    {% if elem.background %}
                                    <span class="color-swatch" style="background-color: {{ elem.background }}"></span>
                                    {% endif %}
                                </div>
                            </div>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}

                    {% if contrast.correct_elements %}
                    <div class="success-summary">
                        <strong>‚úÖ –£—Å–ø—ñ—à–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ:</strong> {{ contrast.correct_elements }} –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º –∫–æ–Ω—Ç—Ä–∞—Å—Ç–æ–º
                    </div>
                    {% endif %}
                </div>
                {% endif %}

                <!-- Media Accessibility -->
                {% if detailed_analysis.get('media_accessibility') %}
                {% set media = detailed_analysis.media_accessibility %}
                <div class="submetric-section">
                    <h4>üé¨ –î–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –º–µ–¥—ñ–∞</h4>
                    {% if media.score_explanation %}
                    <div class="score-explanation">{{ media.score_explanation }}</div>
                    {% endif %}

                    {% if media.problematic_media %}
                    <h5 class="problematic">‚ùå –ü—Ä–æ–±–ª–µ–º–Ω—ñ –º–µ–¥—ñ–∞ –µ–ª–µ–º–µ–Ω—Ç–∏ ({{ media.problematic_media|length }}):</h5>
                    <div class="element-list">
                        {% for m in media.problematic_media %}
                        <div class="element-item problematic">
                            <div class="element-selector">{{ m.selector or '–ù–µ–≤—ñ–¥–æ–º–∏–π —Å–µ–ª–µ–∫—Ç–æ—Ä' }}</div>
                            <div class="element-html">{{ m.html or 'HTML –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π' }}</div>
                            <div class="element-issue"><strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> {{ m.issue or '–ù–µ–≤—ñ–¥–æ–º–∞ –ø—Ä–æ–±–ª–µ–º–∞' }}</div>
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}

                    {% if media.supported_media %}
                    <div class="success-summary">
                        <strong>‚úÖ –£—Å–ø—ñ—à–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ:</strong> {{ media.supported_media }} –º–µ–¥—ñ–∞ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –∑ proper accessibility
                    </div>
                    {% endif %}
                </div>
                {% endif %}
            </div>
            {% endif %}

            <!-- –ö–ï–†–û–í–ê–ù–Ü–°–¢–¨ -->
            {% if detailed_analysis.get('keyboard_navigation') or detailed_analysis.get('structured_navigation') %}
            <div class="metric-section">
                <div class="metric-section-title">
                    <span>‚å®Ô∏è –ö–µ—Ä–æ–≤–∞–Ω—ñ—Å—Ç—å ({{ (subscores.operability * 100)|round(1) }}%)</span>
                    <span class="metric-score-display {{ get_score_class(subscores.operability) }}">
                        {{ (subscores.operability * 100)|round(1) }}%
                    </span>
                </div>

                <!-- Keyboard Navigation -->
                {% if detailed_analysis.get('keyboard_navigation') %}
                {% set keyboard = detailed_analysis.keyboard_navigation %}
                <div class="submetric-section">
                    <h4>‚å®Ô∏è –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–Ω–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è</h4>
                    {% if keyboard.score_explanation %}
                    <div class="score-explanation">{{ keyboard.score_explanation }}</div>
                    {% endif %}

                    {% if keyboard.problematic_elements %}
                    <h5 class="problematic">‚ùå –ü—Ä–æ–±–ª–µ–º–Ω—ñ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ ({{ keyboard.problematic_elements|length }}):</h5>
                    <div class="element-list">
                        {% for elem in keyboard.problematic_elements %}
                        <div class="element-item problematic">
                            <div class="element-selector">{{ elem.selector or '–ù–µ–≤—ñ–¥–æ–º–∏–π —Å–µ–ª–µ–∫—Ç–æ—Ä' }}</div>
                            <div class="element-html">{{ elem.html or 'HTML –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π' }}</div>
                            <div class="element-issue"><strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> {{ elem.issue or '–ù–µ–≤—ñ–¥–æ–º–∞ –ø—Ä–æ–±–ª–µ–º–∞' }}</div>
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}

                    {% if keyboard.accessible_elements %}
                    <div class="success-summary">
                        <strong>‚úÖ –£—Å–ø—ñ—à–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ:</strong> {{ keyboard.accessible_elements }} –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—é –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–Ω–æ—é –Ω–∞–≤—ñ–≥–∞—Ü—ñ—î—é
                    </div>
                    {% endif %}
                </div>
                {% endif %}

                <!-- Structured Navigation (Headings) -->
                {% if detailed_analysis.get('structured_navigation') %}
                {% set headings = detailed_analysis.structured_navigation %}
                <div class="submetric-section">
                    <h4>üìë –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è (–ó–∞–≥–æ–ª–æ–≤–∫–∏)</h4>
                    {% if headings.score_explanation %}
                    <div class="score-explanation">{{ headings.score_explanation }}</div>
                    {% endif %}

                    {% if headings.problematic_headings %}
                    <h5 class="problematic">‚ùå –ü—Ä–æ–±–ª–µ–º–Ω—ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏ ({{ headings.problematic_headings|length }}):</h5>
                    <div class="element-list">
                        {% for h in headings.problematic_headings %}
                        <div class="element-item problematic">
                            <div class="element-selector">{{ h.selector or '–ù–µ–≤—ñ–¥–æ–º–∏–π —Å–µ–ª–µ–∫—Ç–æ—Ä' }}</div>
                            <div class="element-html">{{ h.html or 'HTML –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π' }}</div>
                            <div class="element-issue"><strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> {{ h.issue or '–ù–µ–≤—ñ–¥–æ–º–∞ –ø—Ä–æ–±–ª–µ–º–∞' }}</div>
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}

                    {% if headings.correct_headings %}
                    <div class="success-summary">
                        <strong>‚úÖ –£—Å–ø—ñ—à–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ:</strong> {{ headings.correct_headings }} –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é
                    </div>
                    {% endif %}
                </div>
                {% endif %}
            </div>
            {% endif %}

            <!-- –ó–†–û–ó–£–ú–Ü–õ–Ü–°–¢–¨ -->
            {% if detailed_analysis.get('instruction_clarity') or detailed_analysis.get('input_assistance') or detailed_analysis.get('error_support') %}
            <div class="metric-section">
                <div class="metric-section-title">
                    <span>üí° –ó—Ä–æ–∑—É–º—ñ–ª—ñ—Å—Ç—å ({{ (subscores.understandability * 100)|round(1) }}%)</span>
                    <span class="metric-score-display {{ get_score_class(subscores.understandability) }}">
                        {{ (subscores.understandability * 100)|round(1) }}%
                    </span>
                </div>

                <!-- Instruction Clarity -->
                {% if detailed_analysis.get('instruction_clarity') %}
                {% set instructions = detailed_analysis.instruction_clarity %}
                <div class="submetric-section">
                    <h4>üìù –ß—ñ—Ç–∫—ñ—Å—Ç—å —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π</h4>
                    {% if instructions.score_explanation %}
                    <div class="score-explanation">{{ instructions.score_explanation }}</div>
                    {% endif %}

                    {% if instructions.problematic_instructions %}
                    <h5 class="problematic">‚ùå –ù–µ–∑—Ä–æ–∑—É–º—ñ–ª—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó ({{ instructions.problematic_instructions|length }}):</h5>
                    <div class="element-list">
                        {% for instr in instructions.problematic_instructions %}
                        <div class="element-item problematic">
                            <div class="element-selector">{{ instr.selector or '–ù–µ–≤—ñ–¥–æ–º–∏–π —Å–µ–ª–µ–∫—Ç–æ—Ä' }}</div>
                            <div class="element-html">{{ instr.html or 'HTML –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π' }}</div>
                            <div class="element-issue"><strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> {{ instr.issue or '–ù–µ–≤—ñ–¥–æ–º–∞ –ø—Ä–æ–±–ª–µ–º–∞' }}</div>
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}

                    {% if instructions.clear_instructions %}
                    <div class="success-summary">
                        <strong>‚úÖ –£—Å–ø—ñ—à–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ:</strong> {{ instructions.clear_instructions }} —á—ñ—Ç–∫–∏—Ö —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π
                    </div>
                    {% endif %}
                </div>
                {% endif %}

                <!-- Input Assistance -->
                {% if detailed_analysis.get('input_assistance') %}
                {% set input_assist = detailed_analysis.input_assistance %}
                <div class="submetric-section">
                    <h4>üÜò –î–æ–ø–æ–º–æ–≥–∞ –ø—Ä–∏ –≤–≤–µ–¥–µ–Ω–Ω—ñ</h4>
                    {% if input_assist.score_explanation %}
                    <div class="score-explanation">{{ input_assist.score_explanation }}</div>
                    {% endif %}

                    {% if input_assist.problematic_fields %}
                    <h5 class="problematic">‚ùå –ü—Ä–æ–±–ª–µ–º–Ω—ñ –ø–æ–ª—è —Ñ–æ—Ä–º ({{ input_assist.problematic_fields|length }}):</h5>
                    <div class="element-list">
                        {% for field in input_assist.problematic_fields %}
                        <div class="element-item problematic">
                            <div class="element-selector">{{ field.selector or '–ù–µ–≤—ñ–¥–æ–º–∏–π —Å–µ–ª–µ–∫—Ç–æ—Ä' }}</div>
                            <div class="element-html">{{ field.html or 'HTML –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π' }}</div>
                            <div class="element-issue"><strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> {{ field.issue or '–ù–µ–≤—ñ–¥–æ–º–∞ –ø—Ä–æ–±–ª–µ–º–∞' }}</div>
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}

                    {% if input_assist.assisted_fields %}
                    <div class="success-summary">
                        <strong>‚úÖ –£—Å–ø—ñ—à–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ:</strong> {{ input_assist.assisted_fields }} –ø–æ–ª—ñ–≤ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—é –¥–æ–ø–æ–º–æ–≥–æ—é
                    </div>
                    {% endif %}
                </div>
                {% endif %}

                <!-- Error Support -->
                {% if detailed_analysis.get('error_support') %}
                {% set errors = detailed_analysis.error_support %}
                <div class="submetric-section">
                    <h4>‚ö†Ô∏è –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫</h4>
                    {% if errors.score_explanation %}
                    <div class="score-explanation">{{ errors.score_explanation }}</div>
                    {% endif %}

                    {% if errors.problematic_forms %}
                    <h5 class="problematic">‚ùå –§–æ—Ä–º–∏ –±–µ–∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó ({{ errors.problematic_forms|length }}):</h5>
                    <div class="element-list">
                        {% for form in errors.problematic_forms %}
                        <div class="element-item problematic">
                            <div class="element-selector">{{ form.selector or '–ù–µ–≤—ñ–¥–æ–º–∏–π —Å–µ–ª–µ–∫—Ç–æ—Ä' }}</div>
                            <div class="element-html">{{ form.html or 'HTML –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π' }}</div>
                            <div class="element-issue"><strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> {{ form.issue or '–í—ñ–¥—Å—É—Ç–Ω—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—è' }}</div>
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}

                    {% if errors.supported_forms %}
                    <div class="success-summary">
                        <strong>‚úÖ –£—Å–ø—ñ—à–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ:</strong> {{ errors.supported_forms }} —Ñ–æ—Ä–º –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—é –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é
                    </div>
                    {% endif %}
                </div>
                {% endif %}
            </div>
            {% endif %}

            <!-- –õ–û–ö–ê–õ–Ü–ó–ê–¶–Ü–Ø -->
            {% if detailed_analysis.get('localization') %}
            {% set localization = detailed_analysis.localization %}
            <div class="metric-section">
                <div class="metric-section-title">
                    <span>üåç –õ–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è ({{ (subscores.localization * 100)|round(1) }}%)</span>
                    <span class="metric-score-display {{ get_score_class(subscores.localization) }}">
                        {{ (subscores.localization * 100)|round(1) }}%
                    </span>
                </div>

                <div class="submetric-section">
                    <h4>üåê –ú–æ–≤–∏ —Ç–∞ –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è</h4>
                    {% if localization.score_explanation %}
                    <div class="score-explanation">{{ localization.score_explanation }}</div>
                    {% endif %}

                    {% if localization.detected_languages %}
                    <div class="success-summary">
                        <strong>‚úÖ –í–∏—è–≤–ª–µ–Ω—ñ –º–æ–≤–∏:</strong> {{ localization.detected_languages|join(', ') }}
                    </div>
                    {% endif %}

                    {% if localization.missing_languages %}
                    <div class="element-issue" style="margin-top: 15px;">
                        <strong>‚ö†Ô∏è –í—ñ–¥—Å—É—Ç–Ω—ñ –º–æ–≤–Ω—ñ –∞—Ç—Ä–∏–±—É—Ç–∏:</strong> {{ localization.missing_languages|join(', ') }}
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endif %}

            <!-- –†–ï–ö–û–ú–ï–ù–î–ê–¶–Ü–á -->
            <div class="recommendations-section">
                <h3>üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è</h3>
                {% for rec in recommendations %}
                <div class="recommendation-item">
                    <div style="font-weight: 600; color: #e67e22;">
                        {{ rec.category }}
                        <span class="priority {{ rec.priority.lower() if rec.priority else 'medium' }}">
                            {{ rec.priority or '–°–µ—Ä–µ–¥–Ω—ñ–π' }}
                        </span>
                    </div>
                    <div style="margin-top: 8px;">{{ rec.recommendation }}</div>
                    <div style="font-size: 0.85em; color: #666; margin-top: 5px;">{{ rec.wcag_reference }}</div>
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="footer">
            <p><strong>–ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ Accessibility Evaluator v1.0.1</strong></p>
            <p>{{ timestamp }}</p>
            <p>–ê–Ω–∞–ª—ñ–∑ –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö WCAG 2.1, axe-core —Ç–∞ ISO 25023</p>
        </div>
    </div>

    <script>
        // Toggle accordion
        function toggleAccordion(header) {
            const content = header.nextElementSibling;
            const isActive = header.classList.contains('active');

            if (isActive) {
                header.classList.remove('active');
                content.classList.remove('active');
            } else {
                header.classList.add('active');
                content.classList.add('active');
            }
        }
    </script>
</body>
</html>
