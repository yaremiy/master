<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç Frontend</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        input[type="url"] { width: 300px; padding: 10px; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer; }
        .loading { display: none; color: #666; }
        .results { display: none; margin-top: 20px; padding: 20px; background: #f8f9fa; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>–¢–µ—Å—Ç Frontend Accessibility Evaluator</h1>
    
    <form id="testForm">
        <div class="form-group">
            <label for="url">URL –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:</label><br>
            <input type="url" id="url" value="https://example.com" required>
        </div>
        <button type="submit" id="submitBtn">–¢–µ—Å—Ç—É–≤–∞—Ç–∏</button>
    </form>
    
    <div id="loading" class="loading">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
    <div id="results" class="results"></div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('‚úÖ DOM –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ');
            
            const form = document.getElementById('testForm');
            const urlInput = document.getElementById('url');
            const submitBtn = document.getElementById('submitBtn');
            const loadingDiv = document.getElementById('loading');
            const resultsDiv = document.getElementById('results');
            
            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                console.log('üìù –§–æ—Ä–º–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–∞');
                
                const url = urlInput.value.trim();
                console.log('üîó URL:', url);
                
                // –ü–æ–∫–∞–∑–∞—Ç–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
                loadingDiv.style.display = 'block';
                resultsDiv.style.display = 'none';
                submitBtn.disabled = true;
                
                try {
                    console.log('üì° –í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –∑–∞–ø–∏—Ç...');
                    
                    const response = await fetch('http://localhost:8001/api/evaluate', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify({ url: url })
                    });
                    
                    console.log('üì® –°—Ç–∞—Ç—É—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ:', response.status);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    
                    const data = await response.json();
                    console.log('üìä –û—Ç—Ä–∏–º–∞–Ω—ñ –¥–∞–Ω—ñ:', data);
                    
                    // –ü–æ–∫–∞–∑–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
                    resultsDiv.innerHTML = `
                        <h3>‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∞–Ω–∞–ª—ñ–∑—É</h3>
                        <p><strong>URL:</strong> ${data.url}</p>
                        <p><strong>–°–∫–æ—Ä:</strong> ${(data.final_score * 100).toFixed(1)}%</p>
                        <p><strong>–†—ñ–≤–µ–Ω—å:</strong> ${data.quality_level}</p>
                        <p><strong>–û–ø–∏—Å:</strong> ${data.quality_description}</p>
                        
                        <h4>–ü—ñ–¥—Å–∫–æ—Ä–∏:</h4>
                        <ul>
                            <li>–ü–µ—Ä—Ü–µ–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å: ${(data.subscores.perceptibility * 100).toFixed(1)}%</li>
                            <li>–ö–µ—Ä–æ–≤–∞–Ω—ñ—Å—Ç—å: ${(data.subscores.operability * 100).toFixed(1)}%</li>
                            <li>–ó—Ä–æ–∑—É–º—ñ–ª—ñ—Å—Ç—å: ${(data.subscores.understandability * 100).toFixed(1)}%</li>
                            <li>–õ–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è: ${(data.subscores.localization * 100).toFixed(1)}%</li>
                        </ul>
                        
                        <h4>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó (${data.recommendations.length}):</h4>
                        <ul>
                            ${data.recommendations.map(rec => `<li>${rec.category}: ${rec.recommendation}</li>`).join('')}
                        </ul>
                    `;
                    resultsDiv.style.display = 'block';
                    
                } catch (error) {
                    console.error('‚ùå –ü–æ–º–∏–ª–∫–∞:', error);
                    resultsDiv.innerHTML = `<div class="error">‚ùå –ü–æ–º–∏–ª–∫–∞: ${error.message}</div>`;
                    resultsDiv.style.display = 'block';
                } finally {
                    loadingDiv.style.display = 'none';
                    submitBtn.disabled = false;
                }
            });
        });
    </script>
</body>
</html>